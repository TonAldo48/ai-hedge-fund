(()=>{var e={};e.id=379,e.ids=[379],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67174:(e,r,o)=>{"use strict";o.r(r),o.d(r,{patchFetch:()=>f,routeModule:()=>d,serverHooks:()=>m,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>h});var a={};o.r(a),o.d(a,{GET:()=>g});var t=o(96559),n=o(48088),s=o(37719),i=o(32190),l=o(87292);let c=["AAPL","MSFT","GOOGL","AMZN","TSLA","META","NVDA","JPM","V","WMT"],u=[{symbol:"AAPL",name:"Apple Inc.",price:178.72,change:2.45,changePercent:1.39,marketCap:28e11,volume:57e6,sector:"Technology"},{symbol:"MSFT",name:"Microsoft Corporation",price:402.65,change:3.18,changePercent:.79,marketCap:3e12,volume:21e6,sector:"Technology"},{symbol:"GOOGL",name:"Alphabet Inc.",price:142.17,change:-.83,changePercent:-.58,marketCap:18e11,volume:25e6,sector:"Technology"},{symbol:"AMZN",name:"Amazon.com Inc.",price:178.15,change:1.23,changePercent:.7,marketCap:185e10,volume:3e7,sector:"Consumer Cyclical"},{symbol:"TSLA",name:"Tesla, Inc.",price:255.7,change:-3.45,changePercent:-1.33,marketCap:81e10,volume:92e6,sector:"Automotive"}];async function g(){if(console.log("============================================="),console.log("Fetching stocks for Market Overview"),console.log("Environment variables:"),console.log("NEXT_PUBLIC_USE_YAHOO_FINANCE=true"),console.log(`RAPIDAPI_KEY configured: ${(0,l.HW)()}`),console.log("USE_YAHOO_FINANCE flag=true"),console.log("============================================="),!(0,l.HW)())return console.warn("Yahoo Finance is enabled but RapidAPI key is not configured."),console.warn("Please sign up at https://rapidapi.com/apidojo/api/yahoo-finance1/ and add your API key to .env.local"),console.log("Returning fallback mock data instead"),i.NextResponse.json(u);try{if((0,l.HW)())try{console.log("Fetching stock data from Yahoo Finance API");let e=c.map(e=>(0,l.fn)(e)),r=(await Promise.all(e)).filter(e=>null!==e).map(e=>({symbol:e.symbol,name:e.longName||e.shortName||e.symbol,price:e.regularMarketPrice,change:e.regularMarketChange,changePercent:e.regularMarketChangePercent,marketCap:e.marketCap,volume:e.regularMarketVolume,sector:({NMS:"Technology",NGM:"Technology",NYQ:"Finance",PCX:"Consumer Cyclical",ASE:"Healthcare"})[e.exchange]||"Other"}));if(r&&r.length>0)return console.log(`Successfully fetched ${r.length} stocks from Yahoo Finance`),i.NextResponse.json(r);return console.warn("No stock data returned from Yahoo Finance"),console.log("Returning fallback mock data instead"),i.NextResponse.json(u)}catch(e){return console.error("Error fetching from Yahoo Finance:",e),console.log("Returning fallback mock data instead"),i.NextResponse.json(u)}else console.log("RapidAPI key not configured, using backend API");let e=await fetch("http://127.0.0.1:8000/api/stocks",{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(console.log(`API response status: ${e.status}`),!e.ok){let r=await e.json().catch(()=>null);return console.error("Error from stocks API:",r),console.log("Returning fallback mock data instead"),i.NextResponse.json(u)}let r=await e.json();if(!r||!Array.isArray(r)||0===r.length)return console.log("No data returned from backend API, using fallback mock data"),i.NextResponse.json(u);return console.log(`Successfully fetched ${r.length} stocks from backend API`),i.NextResponse.json(r)}catch(e){return console.error("Error processing stocks request:",e),console.log("Returning fallback mock data instead"),i.NextResponse.json(u)}}let d=new t.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/stocks/route",pathname:"/api/stocks",filename:"route",bundlePath:"app/api/stocks/route"},resolvedPagePath:"/Users/dn/Documents/GitHub.nosync/ai-hedge-fund/ai/ai-hedge-fund/web/src/app/api/stocks/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:p,workUnitAsyncStorage:h,serverHooks:m}=d;function f(){return(0,s.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:h})}},78335:()=>{},87292:(e,r,o)=>{"use strict";o.d(r,{EA:()=>u,HW:()=>s,Z1:()=>l,fn:()=>i,yM:()=>c});let a="YOUR_RAPIDAPI_KEY_HERE",t="yahoo-finance15.p.rapidapi.com",n=a&&!1;function s(){return n}async function i(e){try{if(!n)return console.warn("RapidAPI key not configured. Set NEXT_PUBLIC_RAPIDAPI_KEY in .env.local"),null;let r=`https://${t}/api/yahoo/qu/quote/${e}`;console.log(`Fetching quote for ${e} from RapidAPI Yahoo Finance`);let o=await fetch(r,{method:"GET",headers:{"X-RapidAPI-Key":a,"X-RapidAPI-Host":t}});if(!o.ok)return console.error(`Failed to fetch quote for ${e}: Status ${o.status} - ${o.statusText}`),(401===o.status||403===o.status)&&console.error("API key may be invalid or subscription inactive. Visit https://rapidapi.com/apidojo/api/yahoo-finance15/"),null;let s=await o.json();if(!s)return console.error(`No data returned for ${e}`),null;if(s.message&&s.message.includes("error"))return console.error(`API error for ${e}:`,s.message),null;if(!s.symbol)return console.error(`Invalid data format for ${e}:`,JSON.stringify(s).substring(0,200)),null;return{symbol:s.symbol,regularMarketPrice:s.regularMarketPrice?.raw||0,regularMarketChange:s.regularMarketChange?.raw||0,regularMarketChangePercent:s.regularMarketChangePercent?.raw||0,regularMarketVolume:s.regularMarketVolume?.raw||0,marketCap:s.marketCap?.raw||0,regularMarketOpen:s.regularMarketOpen?.raw||0,regularMarketDayHigh:s.regularMarketDayHigh?.raw||0,regularMarketDayLow:s.regularMarketDayLow?.raw||0,regularMarketTime:s.regularMarketTime?.raw||0,currency:s.currency||"USD",exchange:s.exchange||"",shortName:s.shortName||"",longName:s.longName||"",fiftyTwoWeekHigh:s.fiftyTwoWeekHigh?.raw||0,fiftyTwoWeekLow:s.fiftyTwoWeekLow?.raw||0,trailingPE:s.trailingPE?.raw,trailingAnnualDividendYield:s.trailingAnnualDividendYield?.raw,trailingAnnualDividendRate:s.trailingAnnualDividendRate?.raw}}catch(r){return console.error(`Error fetching quote for ${e}:`,r),null}}async function l(e,r="3mo",o="1d"){try{if(!n)return console.warn("RapidAPI key not configured. Please sign up at https://rapidapi.com/apidojo/api/yahoo-finance1/"),[];let s=`https://${t}/api/yahoo/hi/history/${e}/${o}/${r}`;console.log(`Fetching historical data for ${e} from RapidAPI Yahoo Finance`);let i=await fetch(s,{method:"GET",headers:{"X-RapidAPI-Key":a,"X-RapidAPI-Host":t}});if(!i.ok)return console.error(`Failed to fetch historical data for ${e}: ${i.statusText}`),[];let l=await i.json();if(!l||!l.items||0===Object.keys(l.items).length)return console.error(`No historical data found for ${e}`),[];let c=Object.keys(l.items).map(e=>{let r=l.items[e];return{date:new Date(1e3*parseInt(e)),open:r.open||0,high:r.high||0,low:r.low||0,close:r.close||0,volume:r.volume||0,adjClose:r.adjclose||r.close||0}}).filter(e=>e.open&&e.high&&e.low&&e.close);return c.sort((e,r)=>e.date.getTime()-r.date.getTime()),c}catch(r){return console.error(`Error fetching historical data for ${e}:`,r),[]}}function c(e){switch(e){case"1D":return{period:"1d",interval:"5m"};case"1W":return{period:"5d",interval:"15m"};case"1M":return{period:"1mo",interval:"1d"};case"3M":default:return{period:"3mo",interval:"1d"};case"1Y":return{period:"1y",interval:"1d"};case"5Y":return{period:"5y",interval:"1wk"}}}function u(e){return e.map(e=>({date:e.date.toISOString().split("T")[0],open:e.open,high:e.high,low:e.low,close:e.close,price:e.close,volume:e.volume}))}},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),a=r.X(0,[447,580],()=>o(67174));module.exports=a})();